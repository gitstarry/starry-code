React 组件中的数据流动分为几个层次:

1. Props 传递数据(单向数据流)
这是 React 单向数据流的核心原则。父组件通过 props 将数据传递给子组件,子组件只能读取这些 props,无法直接修改。如果子组件需要修改数据,只能通过调用父组件传递的回调函数,再由父组件修改状态。

2. 状态管理(状态提升)
某些情况下,多个组件需要共享相同的数据源,这时可以将共享状态提升至最近的公共父组件,由该父组件统一管理状态并通过 props 传递数据。

3. Context(跨层级组件传递数据)
某些数据确实需要在组件树中进行跨层级的传递,使用 Context 可以避免通过中间组件传递 props 的繁琐。Context 提供了一种在组件之间共享值的方式,而不必显式地通过组件树的逐层传递 props。

4. Redux/MobX等状态管理库
对于大型应用,可以使用状态管理库如Redux或MobX来集中存储和管理应用状态。组件通过映射状态片段到props,或dispatch actions触发状态变更,实现组件间的通信。

5. Hooks 自带状态管理
随着 Hooks 的出现,React 函数组件也可以直接管理自己的状态。常用的 useState 可以用于管理组件内部状态, useReducer用于管理复杂的状态逻辑, useContext 用于共享状态等。

6. 渲染属性和高阶组件模式
这是React中一些编码模式,允许跨组件树共享状态或功能。渲染属性是一种通过共享代码的方式来实现状态共享的简单技术,高阶组件可以用于扩展现有组件的功能。

总的来说,React 从简单的 props 单向数据流,到状态提升,Context,第三方状态库,再到 Hooks 自带的状态管理,以及编码模式,为开发者提供了从浅入深,渐进增强的数据流动解决方案。