# 为什么选择函数式组件： 
React 的理念强调函数式编程、不可变数据以及声明式编程。而函数组件与这些理念高度契合,这也是官方推荐函数组件的一个重要原因。
# 函数组件相比类组件优点
1. 代码更加简洁:函数组件去除了 this 的绑定问题和生命周期方法,语法更加简洁。
2. 更符合React理念:React 一直倡导函数式编程思想,函数组件天生与之契合。
3. 更高的渲染性能:函数组件渲染过程纯粹是根据状态计算界面,没有其他多余逻辑。
4. React Hooks 的支持:Hooks 赋予了函数组件更强大的能力,官方也在大力推广 Hooks。
5. 代码逻辑更清晰:函数组件基于函数式编程,更易阅读和维护。函数组件逻辑与生命周期耦合，并且一个生命周期内往往有很多逻辑，函数组件解决了状态逻辑复用
# 函数组件还存在的问题
1. Hooks虽然补齐了大部分函数组件的能力，比如状态，生命周期等，但还是有一些没有实现比如
   1. 组件的静态方法和属性： 无法拥有静态方法和属性
   2. 错误边界： 无法直接用到**错误边界**机制
   3. 实例方法和实例属性： 类组件有实例方法和实例属性的概念,开发者可以通过 this 直接访问或修改。而函数组件由于无状态,本质上无法拥有实例属性和方法。虽然可以通过 useRef 来模拟,但原生支持会更好。

# React hooks使用原则
1. 只在React函数中调用hook
2. 不在循环，条件或嵌套函数中调用hook
原因： react底层是链表

为什么 React Hook 要这样设计,背后有一些深层次的考虑和权衡。让我们从以下几个角度来探讨:

保持简单性和一致性
React 团队在设计 Hook 时,追求的是简单性和一致性。Hook 的工作方式是基于调用顺序的,这种设计使得它们的行为更加可预测和容易理解。如果允许在条件语句或循环中调用 Hook,就会增加复杂性,开发者需要费力地追踪每次渲染时 Hook 的调用顺序,从而降低了可维护性。

避免滥用带来的陷阱
如果不加任何限制,开发者可能会滥用 Hook,导致代码难以推理和维护。例如,在循环中调用 Hook 会导致组件状态和副作用的管理变得混乱。通过设置明确的约束,React 团队希望开发者能够遵循最佳实践,避免踩到一些常见的陷阱。

向函数式编程靠拢
Hook 的设计思路受到了函数式编程的影响。在函数式编程中,函数的调用顺序和依赖关系非常重要,这样可以保证函数的纯度和可预测性。Hook 的工作原理与此类似,它们依赖于调用顺序来管理状态和副作用,这使得组件的行为更容易推理和测试。

与未来的优化和改进保持一致
React 团队希望 Hook 的设计能够与未来的优化和改进相兼容。例如,如果允许在条件语句中调用 Hook,就会给未来的渲染优化带来挑战,因为优化器需要追踪每次渲染时 Hook 的调用情况。通过保持简单性和一致性,React 团队为未来的改进留下了空间。

渐进式迁移
Hook 的设计还考虑了与现有代码的兼容性。通过保持简单性和一致性,React 团队希望开发者能够渐进式地将现有代码迁移到 Hook,而不会引入太多的breaking changes。这有助于平滑过渡,降低迁移成本。

总的来说,Hook 的设计原则旨在保持简单性、一致性和可预测性,同时为未来的优化和改进留下空间。虽然这些限制可能会带来一些不便,但它们有助于避免一些常见的陷阱,并确保代码的可维护性和可推理性。这是 React 团队在权衡利弊后作出的设计决策,旨在为开发者提供一个更加可靠和高效的开发体验。